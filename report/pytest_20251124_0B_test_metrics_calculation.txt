============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.1, pluggy-1.6.0 -- /mnt/c/Users/ivn_b/Desktop/invest-bot-suite/.venv/bin/python
cachedir: .pytest_cache
rootdir: /mnt/c/Users/ivn_b/Desktop/invest-bot-suite
plugins: anyio-4.10.0
collecting ... collected 1 item

tests/test_backtest_deepseek.py::test_metrics_calculation FAILED         [100%]

=================================== FAILURES ===================================
___________________________ test_metrics_calculation ___________________________

synthetic_prices = 2023-01-01    102.483571
2023-01-02     99.813729
2023-01-03    104.248544
2023-01-04    109.130301
2023-01-05    100....04-08    150.295175
2023-04-09    149.520517
2023-04-10    148.827064
Freq: D, Name: price, Length: 100, dtype: float64

    def test_metrics_calculation(synthetic_prices):
        backtester = SimpleBacktester(synthetic_prices)
        portfolio = backtester.run()
        metrics = calculate_metrics(portfolio)
>       assert -0.5 < metrics['max_drawdown'] < 0
E       assert -0.5 < np.float64(nan)

tests/test_backtest_deepseek.py:37: AssertionError
=============================== warnings summary ===============================
tests/test_backtest_deepseek.py::test_metrics_calculation
  /mnt/c/Users/ivn_b/Desktop/invest-bot-suite/backtest_initial.py:166: RuntimeWarning: invalid value encountered in scalar divide
    total_return = df["value"].iloc[-1] / df["value"].iloc[0] - 1

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_backtest_deepseek.py::test_metrics_calculation - assert -0.5 < np.float64(nan)
========================= 1 failed, 1 warning in 4.87s =========================
